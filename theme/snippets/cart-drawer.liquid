<div class="cart-drawer" data-cart-drawer>
  <div class="cart-drawer__overlay" data-cart-close></div>
  <div class="cart-drawer__panel">
    <div class="cart-drawer__header">
      <h2 class="cart-drawer__title">{{ 'cart.general.title' | t }} ({{ cart.item_count }})</h2>
      <button
        type="button"
        class="cart-drawer__close-btn"
        data-cart-close
        aria-label="{{ 'general.accessibility.close' | t }}"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <div class="cart-drawer__body">
      {%- if cart.item_count > 0 -%}
        <div class="cart-drawer__items">
          {%- for item in cart.items -%}
            <div class="cart-line" data-cart-item="{{ item.key }}">
              <a href="{{ item.url }}">
                <img
                  src="{{ item.image | img_url: '120x' }}"
                  alt="{{ item.title | escape }}"
                  class="cart-line__img"
                  width="60"
                  height="60"
                  loading="lazy"
                >
              </a>

              <div class="cart-line__content">
                <a href="{{ item.url }}" class="cart-line__title">
                  {{ item.product.title }}
                </a>
                {%- if item.variant.title != 'Default Title' -%}
                  <p class="cart-line__meta">{{ item.variant.title }}</p>
                {%- endif -%}
              </div>

              <p class="cart-line__price">{{ item.final_line_price | money }}</p>

              <div class="cart-line__actions">
                <label for="quantity-drawer-{{ item.key }}" class="visually-hidden">
                  {{ 'cart.general.quantity' | t }}
                </label>
                <div class="cart-qty">
                  <button type="button" class="cart-qty__btn" data-quantity-minus aria-label="Decrease quantity">âˆ’</button>
                  <input
                    type="number"
                    id="quantity-drawer-{{ item.key }}"
                    class="cart-qty__input"
                    value="{{ item.quantity }}"
                    min="0"
                    data-cart-item-key="{{ item.key }}"
                    data-quantity-input
                  >
                  <button type="button" class="cart-qty__btn" data-quantity-plus aria-label="Increase quantity">+</button>
                </div>

                <button
                  type="button"
                  class="cart-line__remove"
                  data-cart-remove="{{ item.key }}"
                  aria-label="{{ 'cart.general.remove' | t }}"
                >
                  Remove
                </button>
              </div>
            </div>
          {%- endfor -%}
        </div>

        {%- render 'free-shipping-bar' -%}

        <div class="cart-drawer__footer">
          <div class="cart-drawer__subtotal">
            <span class="cart-drawer__subtotal-label">{{ 'cart.general.subtotal' | t }}</span>
            <span class="cart-drawer__subtotal-price">{{ cart.total_price | money }}</span>
          </div>

          <p class="cart-drawer__note">{{ 'cart.general.taxes_and_shipping' | t }}</p>

          <div class="cart-drawer__buttons">
            <a href="{{ routes.cart_url }}" class="btn btn--secondary">
              {{ 'cart.general.title' | t }}
            </a>

            <form action="{{ routes.cart_url }}" method="post" style="margin: 0;">
              <button type="submit" name="checkout" class="btn btn--primary">
                {{ 'cart.general.checkout' | t }}
              </button>
            </form>
          </div>
        </div>
      {%- else -%}
        <div class="cart-drawer__empty">
          <svg class="cart-drawer__empty-icon" width="56" height="56" viewBox="0 0 64 64" fill="none">
            <path d="M8 16h48l-4 32H12L8 16z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M20 24v-8a12 12 0 0124 0v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <p class="cart-drawer__empty-text">{{ 'cart.general.empty' | t }}</p>
          <a href="{{ routes.all_products_collection_url }}" class="btn btn--primary" data-cart-close>
            {{ 'cart.general.continue_shopping' | t }}
          </a>
        </div>
      {%- endif -%}
    </div>
  </div>
</div>
