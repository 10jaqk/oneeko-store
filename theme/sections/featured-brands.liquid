<section class="featured-brands py-16" style="background-color: var(--color-bg-secondary);">
  <div class="container">
    {%- if section.settings.title != blank -%}
      <div class="section-header text-center mb-4">
        <h2 class="section-title">{{ section.settings.title }}</h2>
        {%- if section.settings.subtitle != blank -%}
          <p class="section-subtitle">{{ section.settings.subtitle }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="featured-brands__grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4">
      {%- for block in section.blocks -%}
        <div class="featured-brand" {{ block.shopify_attributes }}>
          {%- if block.settings.brand_link != blank -%}
            <a href="{{ block.settings.brand_link }}" class="featured-brand__link">
          {%- endif -%}

            {%- if block.settings.brand_image != blank -%}
              <img
                src="{{ block.settings.brand_image | image_url: width: 200 }}"
                srcset="{{ block.settings.brand_image | image_url: width: 100 }} 100w,
                        {{ block.settings.brand_image | image_url: width: 200 }} 200w,
                        {{ block.settings.brand_image | image_url: width: 300 }} 300w"
                sizes="(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw"
                alt="{{ block.settings.brand_name }}"
                loading="lazy"
                class="featured-brand__image"
              >
            {%- else -%}
              <div class="featured-brand__placeholder">
                <span class="featured-brand__name">{{ block.settings.brand_name }}</span>
              </div>
            {%- endif -%}

          {%- if block.settings.brand_link != blank -%}
            </a>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

<style>
  .featured-brands {
    border-top: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
  }

  .section-subtitle {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin-top: var(--spacing-2);
  }

  .featured-brands__grid {
    gap: var(--spacing-6);
  }

  .featured-brand {
    background-color: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-6);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 120px;
    transition: border-color var(--transition-base), box-shadow var(--transition-base);
  }

  .featured-brand:hover {
    border-color: var(--color-border-dark);
    box-shadow: var(--shadow-sm);
  }

  .featured-brand__link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    text-decoration: none;
  }

  .featured-brand__image {
    max-width: 100%;
    max-height: 80px;
    width: auto;
    height: auto;
    object-fit: contain;
    opacity: 0.7;
    transition: opacity var(--transition-base);
  }

  .featured-brand:hover .featured-brand__image {
    opacity: 1;
  }

  .featured-brand__placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  .featured-brand__name {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-secondary);
    text-align: center;
  }

  @media (max-width: 640px) {
    .featured-brands__grid {
      gap: var(--spacing-4);
    }

    .featured-brand {
      min-height: 100px;
      padding: var(--spacing-4);
    }

    .featured-brand__image {
      max-height: 60px;
    }
  }
</style>

{% schema %}
{
  "name": "Featured Brands",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Shop by Brand"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Trusted brands you love"
    }
  ],
  "blocks": [
    {
      "type": "brand",
      "name": "Brand",
      "settings": [
        {
          "type": "text",
          "id": "brand_name",
          "label": "Brand Name",
          "default": "Brand Name"
        },
        {
          "type": "image_picker",
          "id": "brand_image",
          "label": "Brand Logo"
        },
        {
          "type": "url",
          "id": "brand_link",
          "label": "Brand Link (Collection or Page)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Brands",
      "blocks": [
        {
          "type": "brand",
          "settings": {
            "brand_name": "Apple"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Samsung"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Sony"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Anker"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Belkin"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Logitech"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "JBL"
          }
        },
        {
          "type": "brand",
          "settings": {
            "brand_name": "Bose"
          }
        }
      ]
    }
  ]
}
{% endschema %}
